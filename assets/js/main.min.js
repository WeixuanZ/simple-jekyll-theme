/*
 W Zhang
 For weixuanz.github.io
*/
'use strict';window.addEventListener("storage",a=>{"preference-theme"===a.key&&("light"===a.newValue?g("light",!0,!1):"dark"===a.newValue&&g("dark",!0,!1))});window.matchMedia("(prefers-color-scheme: dark)").addListener(a=>{!0!==a.matches?g("light"):g("dark")});document.querySelector("#dark-toggle-box").addEventListener("change",function(){this.checked?g("dark",!0,!0,!0):g("light",!0,!0,!0)});h();var k;{const a=localStorage.getItem("preference-theme");k="light"===a?"light":"dark"===a?"dark":void 0}
g(k||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),!1);function l(){return document.querySelector("#dark-toggle-box").checked?"dark":"light"}function m(a){document.querySelector("#dark-toggle-box").checked="dark"===a}
function g(a,b=!0,e=!0,d=!1){const f=document.documentElement,c=n();"dark"!==l()&&!d||"light"!==a?"light"!==l()&&!d||"dark"!==a||(b&&p(c),f.classList.add("theme-dark"),navbar.style.background="#121212",m("dark"),b&&setTimeout(()=>{p(c,!1)},1E3)):(b&&p(c),f.classList.remove("theme-dark"),navbar.style.background="#fff",m("light"),b&&setTimeout(()=>{p(c,!1)},1E3));e&&localStorage.setItem("preference-theme",a)}
function p(a,b=!0){a.map(e=>{b?e.forEach(d=>d.classList.add("theme-transit")):e.forEach(d=>d.classList.remove("theme-transit"))})}function n(){return"body #navbar #main-header code #blog-list-mini .card #toc".split(" ").map(a=>document.querySelectorAll(a))}
function h(){const a=document.querySelector("#nav-btns");window.addEventListener("scroll",function(){this.scrollY>=nav_init?(a.classList.add("transparent"),"dark"===l()&&(navbar.style.background="#22222280")):(a.classList.remove("transparent"),"dark"===l()&&(navbar.style.background="#121212"))})}const q=document.querySelectorAll("div.highlighter-rouge");
q.forEach(function(a,b){b=`codeblock${b+1}`;a.querySelector("code").setAttribute("id",b);const e=document.createElement("button");e.innerHTML='<svg class="icon"><use xlink:href="#icon-clone-solid"></use></svg>';e.className="code-copy-btn";e.setAttribute("data-clipboard-target",`#${b}`);e.setAttribute("aria-label",`Copy ${b}`);a.querySelector("code").after(e)});0<q.length&&new ClipboardJS(".code-copy-btn");
function t(){if(void 0!==navigator.share)navigator.share({title:document.querySelector(".header").textContent,text:"Check this out!",url:window.location.href}).then(()=>console.log("Shared!")).catch(a=>console.error(a));else{const a=document.querySelector("#share-btn");a.setAttribute("data-clipboard-text",location.href);new ClipboardJS("#share-btn");a.classList.add("shared");setTimeout(()=>{a.classList.remove("shared")},5E3)}}const u=document.querySelector("#share-btn");
u&&u.addEventListener("click",t);const v=document.querySelector("#toc");
if(v){const a=Array.from(v.querySelectorAll("li")).map(function(d){const f=d.querySelector("a"),c=f.getAttribute("href").slice(1),r=document.getElementById(c);return{c:d,anchor:f,a:c,target:r,b:r.offsetTop}});function b(d){return d.reduce((f,c)=>window.pageYOffset+70>c.b?c:f)}const e=function(d={}){let f=d;return function(c){c.a!==f.a&&(f.a&&f.anchor.classList.remove("active"),c.anchor.classList.add("active"),f=c)}}();window.addEventListener("scroll",()=>e(b(a)))};
