/*
 W Zhang
 For weixuanz.github.io
*/
'use strict';window.addEventListener("storage",a=>{"preference-theme"===a.key&&("light"===a.newValue?d("light",!0,!1):"dark"===a.newValue&&d("dark",!0,!1))});window.matchMedia("(prefers-color-scheme: dark)").addListener(a=>{!0!==a.matches?d("light"):d("dark")});document.querySelector("#dark-toggle-box").addEventListener("change",function(){this.checked?d("dark",!0,!0,!0):d("light",!0,!0,!0)});e();var g;{const a=localStorage.getItem("preference-theme");g="light"===a?"light":"dark"===a?"dark":void 0}
d(g||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),!1);function h(){return document.querySelector("#dark-toggle-box").checked?"dark":"light"}function k(a){document.querySelector("#dark-toggle-box").checked="dark"===a}
function d(a,b=!0,c=!0,l=!1){const m=document.documentElement,f=n();"dark"!==h()&&!l||"light"!==a?"light"!==h()&&!l||"dark"!==a||(b&&p(f),m.classList.add("theme-dark"),navbar.style.background="#121212",k("dark"),b&&setTimeout(()=>{p(f,!1)},1E3)):(b&&p(f),m.classList.remove("theme-dark"),navbar.style.background="#fff",k("light"),b&&setTimeout(()=>{p(f,!1)},1E3));c&&localStorage.setItem("preference-theme",a)}
function p(a,b=1){a.map(c=>{b?c.classList.add("theme-transit"):c.classList.remove("theme-transit")})}function n(){return["body","#navbar","#main-header"].map(a=>document.querySelector(a))}function e(){const a=document.querySelector("#dark-toggle-label");window.addEventListener("scroll",function(){this.scrollY>=nav_init?(a.classList.add("hidden"),"dark"===h()&&(navbar.style.background="#22222280")):(a.classList.remove("hidden"),"dark"===h()&&(navbar.style.background="#121212"))})}
function q(a,b){a.classList.add("hidden");setTimeout(()=>{b&&(a.innerHTML=b);a.classList.remove("hidden")},150)}
(function(){const a=document.querySelector("#copyleft");let b=!1;if(location.href.includes("about"))a.innerHTML='<a href="/license">License and Privacy Notice</a>';else if(!location.href.includes("license")){const c=document.querySelector("#main-footer");c.addEventListener("mouseover",function(){b||(q(a,'<a href="/license">License and Privacy Notice</a>'),b=!0)});c.addEventListener("mouseleave",function(){q(a,'Copyleft <span style="display: inline-block; transform: rotate(180deg);">&copy;</span> 2020 W Zhang');
b=!1})}})();const r=document.querySelectorAll("div.highlighter-rouge");r.forEach(function(a,b){b=`codeblock${b+1}`;a.querySelector("code").setAttribute("id",b);let c=document.createElement("button");c.innerHTML='<i class="fas fa-clone"></i>';c.className="code-copy-btn";c.setAttribute("data-clipboard-target",`#${b}`);a.querySelector("code").after(c)});0<r.length&&new ClipboardJS(".code-copy-btn");
function t(){if(void 0!=navigator.share)navigator.share({title:document.querySelector(".header").textContent,text:"Check this out!",url:window.location.href}).then(()=>console.log("Shared!")).catch(a=>console.error(a));else{const a=document.querySelector("#share-btn");a.setAttribute("data-clipboard-text",location.href);new ClipboardJS("#share-btn");a.classList.add("shared");setTimeout(()=>{a.classList.remove("shared")},5E3)}}const u=document.querySelector("#share-btn");
u&&u.addEventListener("click",t);
