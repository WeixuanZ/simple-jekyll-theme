/*
 W Zhang
 For weixuanz.github.io
*/
'use strict';{f();h();k();l();var m;{const b=localStorage.getItem("preference-theme");m="light"===b?"light":"dark"===b?"dark":void 0}const a=m||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");n(a);p(a,!1)}function q(){return document.querySelector("#dark-toggle-box").checked?"dark":"light"}function r(a){document.querySelector("#dark-toggle-box").checked="dark"===a}
function t(a){a={type:"set-theme",f:a};const b=document.querySelector("#utterances iframe");b&&b.contentWindow.postMessage(a,"https://weixuanz.github.io")}function n(a){addEventListener("message",()=>{t(a)})}
function p(a,b=!0,d=!0,c=!1){const e=document.documentElement,g=u();"dark"!==q()&&!c||"light"!==a?"light"!==q()&&!c||"dark"!==a||(b&&v(g),e.classList.add("theme-dark"),navbar.style.background="#121212",r("dark"),t("dark"),b&&setTimeout(()=>{v(g,!1)},1E3)):(b&&v(g),e.classList.remove("theme-dark"),navbar.style.background="#fff",r("light"),t("light"),b&&setTimeout(()=>{v(g,!1)},1E3));d&&localStorage.setItem("preference-theme",a)}
function v(a,b=1){a.map(d=>{b?d.forEach(c=>c.classList.add("theme-transit")):d.forEach(c=>c.classList.remove("theme-transit"))})}function u(){return"body #navbar #main-header code #blog-list-mini .card #toc".split(" ").map(a=>document.querySelectorAll(a))}
function l(){const a=document.querySelector("#dark-toggle-label");window.addEventListener("scroll",function(){this.scrollY>=nav_init?(a.classList.add("transparent"),"dark"===q()&&(navbar.style.background="#22222280")):(a.classList.remove("transparent"),"dark"===q()&&(navbar.style.background="#121212"))})}function f(){window.addEventListener("storage",a=>{"preference-theme"===a.key&&("light"===a.newValue?p("light",!0,!1):"dark"===a.newValue&&p("dark",!0,!1))})}
function h(){window.matchMedia("(prefers-color-scheme: dark)").addListener(a=>{!0!==a.matches?p("light"):p("dark")})}function k(){document.querySelector("#dark-toggle-box").addEventListener("change",function(){this.checked?p("dark",!0,!0,!0):p("light",!0,!0,!0)})}function w(a,b){a.classList.add("transparent");setTimeout(()=>{b&&(a.innerHTML=b);a.classList.remove("transparent")},150)}
(function(){const a=document.querySelector("#main-footer"),b=a.querySelector("#copyleft"),d=b.innerHTML;let c=!1;location.href.includes("about")?b.innerHTML='<a href="/license">Privacy Policy and License</a>':location.href.includes("license")||(a.addEventListener("mouseover",function(){c||(w(b,'<a href="/license">Privacy Policy and License</a>'),c=!0)}),a.addEventListener("mouseleave",function(){w(b,d);c=!1}))})();const x=document.querySelectorAll("div.highlighter-rouge");
x.forEach(function(a,b){b=`codeblock${b+1}`;a.querySelector("code").setAttribute("id",b);let d=document.createElement("button");d.innerHTML='<i class="fas fa-clone"></i>';d.className="code-copy-btn";d.setAttribute("data-clipboard-target",`#${b}`);d.setAttribute("aria-label",`Copy ${b}`);a.querySelector("code").after(d)});0<x.length&&new ClipboardJS(".code-copy-btn");
function y(){if(void 0!=navigator.share)navigator.share({title:document.querySelector(".header").textContent,text:"Check this out!",url:window.location.href}).then(()=>console.log("Shared!")).catch(a=>console.error(a));else{const a=document.querySelector("#share-btn");a.setAttribute("data-clipboard-text",location.href);new ClipboardJS("#share-btn");a.classList.add("shared");setTimeout(()=>{a.classList.remove("shared")},5E3)}}const z=document.querySelector("#share-btn");
z&&z.addEventListener("click",y);const A=document.querySelector("#toc");
if(A){var B=function(d){return d.reduce((c,e)=>window.pageYOffset+70>e.b?e:c)};const a=Array.from(A.querySelectorAll("li")).map(function(d){let c=d.querySelector("a"),e=c.getAttribute("href").slice(1),g=document.getElementById(e);return{c:d,anchor:c,a:e,target:g,b:g.offsetTop}}),b=function(d={}){let c=d;return function(e){e.a!=c.a&&(c.a&&c.anchor.classList.remove("active"),e.anchor.classList.add("active"),c=e)}}();window.addEventListener("scroll",()=>b(B(a)))};
